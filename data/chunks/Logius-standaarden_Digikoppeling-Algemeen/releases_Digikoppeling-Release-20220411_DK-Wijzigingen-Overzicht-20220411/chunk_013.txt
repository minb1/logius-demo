
#####Digikoppeling-Best-Practices-GB
[Pull request](https://github.com/Logius-standaarden/Digikoppeling-Best-Practices-GB/pull/4)
<details><summary>Wijzigingen</summary>

```diff
diff --git a/Digikoppeling-Best-Practices-GB.pdf b/Digikoppeling-Best-Practices-GB.pdf
index d020f65..c3c261d 100644
Binary files a/Digikoppeling-Best-Practices-GB.pdf and b/Digikoppeling-Best-Practices-GB.pdf differ
diff --git a/ch01_Inleiding.md b/ch01_Inleiding.md
index b307a3b..fcad509 100644
--- a/ch01_Inleiding.md
+++ b/ch01_Inleiding.md
@@ -84,7 +84,7 @@ DigiKoppeling richt zich dus uitsluitend op de logistieke laag. Deze afspraken s
 
 De koppelvlakstandaarden dienen te leiden tot een maximum aan interoperabiliteit met een minimum aan benodigde ontwikkelinspanning. Daarom wordt gekozen voor bewezen interoperabele internationale standaarden.
 
-DigiKoppeling maakt berichtenuitwisseling mogelijk op basis van de ebXML/ebMS2 en WUS families van standaarden inclusief de daarbij behorende verwante standaarden.
+DigiKoppeling maakt berichtenuitwisseling mogelijk op basis van de REST API, ebXML/ebMS2 en WUS families van standaarden inclusief de daarbij behorende verwante standaarden.
 
 Aan te sluiten overheidsorganisaties hebben aangegeven op een uniforme manier (één stekker) te willen aansluiten aan DigiKoppeling. Organisaties die beschikken over eigen middleware (ESB, broker) kunnen de aansluiting aan DigiKoppeling, de adapters, in het algemeen realiseren via voorzieningen in die middleware.
 
@@ -101,20 +101,13 @@ Een andere eis is dat met name afnemers gebruik kunnen maken van één “stekke
 ### Specificatie van de koppelvlakstandaard
 
 De koppelvlakspecificatie beschrijft de eisen waar de adapters aan moeten
-
 voldoen om interoperabel met elkaar te kunnen communiceren.
-
 DigiKoppeling gaat over logistiek, dus over de envelop en niet over de
-
 inhoud. De hele set info die tezamen nodig is voor een complete generieke
-
 DigiKoppeling koppelvlakdefinitie (Raamwerk Specificatie genoemd)
-
 bestaat uit:
-
-- interfacedefinitie “on the wire”, (voorbeeld)listing van SOAP headers, en
-
-- informatie over velden en hun specifieke inhoud.
+* interfacedefinitie “on the wire”, (voorbeeld)listing van SOAP headers, en
+* informatie over velden en hun specifieke inhoud.
 
 ## Opbouw van dit document
 
diff --git a/index.html b/index.html
index 2a1d683..5bdc916 100644
--- a/index.html
+++ b/index.html
@@ -17,12 +17,12 @@
 <body>
     <section id='abstract' data-include="01_abstract.html"></section>
     <section id='sotd'></section>
-    <section class="introductory" data-format="markdown" data-include="02_documentbeheer.md"></section>
-    <section class="introductory" data-format="markdown" data-include="03_colofon.md"></section>
+    <section class="introductory" data-include-format="markdown" data-include="02_documentbeheer.md"></section>
+    <section class="introductory" data-include-format="markdown" data-include="03_colofon.md"></section>
     
-<section data-format="markdown" data-include="ch01_Inleiding.md"></section>
-<section data-format="markdown" data-include="ch02_Best Practices.md"></section>
-<section data-format="markdown" data-include="ch03_Use cases.md"></section>
+<section data-include-format="markdown" data-include="ch01_Inleiding.md"></section>
+<section data-include-format="markdown" data-include="ch02_Best Practices.md"></section>
+<section data-include-format="markdown" data-include="ch03_Use cases.md"></section>
     <!-- De rest van het document kun je in Markdown schrijven.  -->
     <!-- <section id="tof" class="informative appendix"></section> -->
     <section id='conformance'>
@@ -49,4 +49,4 @@ <h1>Contributors</h1>
 </body>
 </body>
 
-</html>
\ No newline at end of file
+</html>
diff --git a/snapshot.html b/snapshot.html
index 176d61c..95e49f8 100644
--- a/snapshot.html
+++ b/snapshot.html
@@ -426,13 +426,16 @@ <h2>
 </li>
 <li><p>Transport: deze laag verzorgt het daadwerkelijke transport van het bericht.</p>
 </li>
-</ul><p>DigiKoppeling richt zich dus uitsluitend op de logistieke laag. Deze afspraken staan in de koppelvlakstandaards en andere voorzieningen. In het geval van WUS en ebMS2 komt de logistieke laag overeen met de ‘header’ van het bericht en gaat de ‘body’ uitsluitend over de inhoud. In het geval van Digikoppeling Grote Berichten is een deel van de logistieke informatie opgenomen in de ‘body’ van het bericht in de vorm van gestandaardiseerde meta-data.</p><section id="leidend-principe"><h4 id="x1-3-1-leidend-principe"><bdi class="secno">1.3.1 </bdi>Leidend principe<a class="self-link" href="#leidend-principe" aria-label="Permalink for Section 1.3.1"></a></h4><p>De koppelvlakstandaarden dienen te leiden tot een maximum aan interoperabiliteit met een minimum aan benodigde ontwikkelinspanning. Daarom wordt gekozen voor bewezen interoperabele internationale standaarden.</p><p>DigiKoppeling maakt berichtenuitwisseling mogelijk op basis van de ebXML/ebMS2 en WUS families van standaarden inclusief de daarbij behorende verwante standaarden.</p><p>Aan te sluiten overheidsorganisaties hebben aangegeven op een uniforme manier (één stekker) te willen aansluiten aan DigiKoppeling. Organisaties die beschikken over eigen middleware (ESB, broker) kunnen de aansluiting aan DigiKoppeling, de adapters, in het algemeen realiseren via voorzieningen in die middleware.</p></section></section><section id="koppelvlak-koppelvlakstandaard"><h3 id="x1-4-koppelvlak-koppelvlakstandaard"><bdi class="secno">1.4 </bdi>Koppelvlak &amp; koppelvlakstandaard<a class="self-link" href="#koppelvlak-koppelvlakstandaard" aria-label="Permalink for Section 1.4"></a></h3><p>Een koppelvlak is een interface die volgens vergaande standaards de gegevensuitwisseling verzorgt. Het werken met vaste standaards is essentieel voor een koppelvlak. Hierdoor wordt implementatie vergemakkelijkt. Ook wordt het mogelijk diverse soorten berichten door te sturen met een grote mate van interoperabiliteit.</p><p>Eén van de belangrijkste eisen die door de overheid gesteld wordt bij de inrichting van generieke voorzieningen is dat er niet veel maatwerk ontwikkeld hoeft te worden, maar dat er van “off the shelf” commercieel of OPEN geleverde software gebruik gemaakt kan worden. Voor DigiKoppeling, dus voor de logistieke laag, betreft dat het niet willen ontwikkelen van software voor de adapters.</p><p>Dit doel kan bereikt (benaderd) worden doordat gekozen wordt voor internationale (de jure of de facto) vastgelegde standaards, die door “alle” leveranciers interoperabel zijn geïmplementeerd. Ingeval van Grote Berichten is gebruik gemaakt van een optioneel deel uit de http 1.1 standaard. Hierdoor is het mogelijk om de overdracht te hervatten op het punt van afbreken door een toevallige storing. Zowel standaard servers als clients ondersteunen dit, maar aan de client kant moet de optie ook expliciet gebruikt worden.</p><p>Een andere eis is dat met name afnemers gebruik kunnen maken van één “stekker” (één logistiek koppelpunt).</p><section id="specificatie-van-de-koppelvlakstandaard"><h4 id="x1-4-1-specificatie-van-de-koppelvlakstandaard"><bdi class="secno">1.4.1 </bdi>Specificatie van de koppelvlakstandaard<a class="self-link" href="#specificatie-van-de-koppelvlakstandaard" aria-label="Permalink for Section 1.4.1"></a></h4><p>De koppelvlakspecificatie beschrijft de eisen waar de adapters aan moeten</p><p>voldoen om interoperabel met elkaar te kunnen communiceren.</p><p>DigiKoppeling gaat over logistiek, dus over de envelop en niet over de</p><p>inhoud. De hele set info die tezamen nodig is voor een complete generieke</p><p>DigiKoppeling koppelvlakdefinitie (Raamwerk Specificatie genoemd)</p><p>bestaat uit:</p><ul>
-<li><p>interfacedefinitie “on the wire”, (voorbeeld)listing van SOAP headers, en</p>
-</li>
-<li><p>informatie over velden en hun specifieke inhoud.</p>
-</li>
+</ul><p>DigiKoppeling richt zich dus uitsluitend op de logistieke laag. Deze afspraken staan in de koppelvlakstandaards en andere voorzieningen. In het geval van WUS en ebMS2 komt de logistieke laag overeen met de ‘header’ van het bericht en gaat de ‘body’ uitsluitend over de inhoud. In het geval van Digikoppeling Grote Berichten is een deel van de logistieke informatie opgenomen in de ‘body’ van het bericht in de vorm van gestandaardiseerde meta-data.</p><section id="leidend-principe"><h4 id="x1-3-1-leidend-principe"><bdi class="secno">1.3.1 </bdi>Leidend principe<a class="self-link" href="#leidend-principe" aria-label="Permalink for Section 1.3.1"></a></h4><p>De koppelvlakstandaarden dienen te leiden tot een maximum aan interoperabiliteit met een minimum aan benodigde ontwikkelinspanning. Daarom wordt gekozen voor bewezen interoperabele internationale standaarden.</p><p>DigiKoppeling maakt berichtenuitwisseling mogelijk op basis van de REST API, ebXML/ebMS2 en WUS families van standaarden inclusief de daarbij behorende verwante standaarden.</p><p>Aan te sluiten overheidsorganisaties hebben aangegeven op een uniforme manier (één stekker) te willen aansluiten aan DigiKoppeling. Organisaties die beschikken over eigen middleware (ESB, broker) kunnen de aansluiting aan DigiKoppeling, de adapters, in het algemeen realiseren via voorzieningen in die middleware.</p></section></section><section id="koppelvlak-koppelvlakstandaard"><h3 id="x1-4-koppelvlak-koppelvlakstandaard"><bdi class="secno">1.4 </bdi>Koppelvlak &amp; koppelvlakstandaard<a class="self-link" href="#koppelvlak-koppelvlakstandaard" aria-label="Permalink for Section 1.4"></a></h3><p>Een koppelvlak is een interface die volgens vergaande standaards de gegevensuitwisseling verzorgt. Het werken met vaste standaards is essentieel voor een koppelvlak. Hierdoor wordt implementatie vergemakkelijkt. Ook wordt het mogelijk diverse soorten berichten door te sturen met een grote mate van interoperabiliteit.</p><p>Eén van de belangrijkste eisen die door de overheid gesteld wordt bij de inrichting van generieke voorzieningen is dat er niet veel maatwerk ontwikkeld hoeft te worden, maar dat er van “off the shelf” commercieel of OPEN geleverde software gebruik gemaakt kan worden. Voor DigiKoppeling, dus voor de logistieke laag, betreft dat het niet willen ontwikkelen van software voor de adapters.</p><p>Dit doel kan bereikt (benaderd) worden doordat gekozen wordt voor internationale (de jure of de facto) vastgelegde standaards, die door “alle” leveranciers interoperabel zijn geïmplementeerd. Ingeval van Grote Berichten is gebruik gemaakt van een optioneel deel uit de http 1.1 standaard. Hierdoor is het mogelijk om de overdracht te hervatten op het punt van afbreken door een toevallige storing. Zowel standaard servers als clients ondersteunen dit, maar aan de client kant moet de optie ook expliciet gebruikt worden.</p><p>Een andere eis is dat met name afnemers gebruik kunnen maken van één “stekker” (één logistiek koppelpunt).</p><section id="specificatie-van-de-koppelvlakstandaard"><h4 id="x1-4-1-specificatie-van-de-koppelvlakstandaard"><bdi class="secno">1.4.1 </bdi>Specificatie van de koppelvlakstandaard<a class="self-link" href="#specificatie-van-de-koppelvlakstandaard" aria-label="Permalink for Section 1.4.1"></a></h4><p>De koppelvlakspecificatie beschrijft de eisen waar de adapters aan moeten
+voldoen om interoperabel met elkaar te kunnen communiceren.
+DigiKoppeling gaat over logistiek, dus over de envelop en niet over de
+inhoud. De hele set info die tezamen nodig is voor een complete generieke
+DigiKoppeling koppelvlakdefinitie (Raamwerk Specificatie genoemd)
+bestaat uit:</p><ul>
+<li>interfacedefinitie “on the wire”, (voorbeeld)listing van SOAP headers, en</li>
+<li>informatie over velden en hun specifieke inhoud.</li>
 </ul></section></section><section id="opbouw-van-dit-document"><h3 id="x1-5-opbouw-van-dit-document"><bdi class="secno">1.5 </bdi>Opbouw van dit document<a class="self-link" href="#opbouw-van-dit-document" aria-label="Permalink for Section 1.5"></a></h3><p>Hoofdstuk 1 bevat een aantal algemene inleidende onderwerpen. Hoofdstuk 2 beschrijft de Best Practices voor verschillende scenario's. Hoofdstuk 3 ten slotte bevat generieke use-cases waarin van deze standaard gebruik gemaakt kan worden.</p><p>Begrippen en afkortingen worden toegelicht in het document “Digikoppeling_Architectuur”. Deze zit in de Digikoppeling aansluitkit.</p><p>Dit document en andere documentatie is beschikbaar op <a href="http://www.logius.nl/digikoppeling">www.logius.nl/digikoppeling</a></p></section></section>
-<section data-format="markdown" id="best-practices"><h2 id="x2-best-practices"><bdi class="secno">2. </bdi>Best Practices<a class="self-link" href="#best-practices" aria-label="Permalink for Section 2."></a></h2><section id="inleiding-0"><h3 id="x2-1-inleiding"><bdi class="secno">2.1 </bdi>Inleiding<a class="self-link" href="#inleiding-0" aria-label="Permalink for Section 2.1"></a></h3><p>De situatie kan zich voordoen dat een WUS en/of ebMS2 bericht een grootte krijgt die niet meer efficiënt door de WUS / ebMS2 adapters verwerkt kan worden. Ook kan het zich voordoen dat er behoefte bestaat aan het buiten de normale procesgang ('out-of-band') sturen van aanvullende informatie naar systemen. In die gevallen zal dit “grote bericht” op een andere wijze verstuurd moeten worden: middels de DigiKoppeling Koppelvlakstandaard Grote Berichten.</p><p>De volgende standaard aanpak wordt hierbij gehanteerd:</p><ul>
+<section id="best-practices"><h2 id="x2-best-practices"><bdi class="secno">2. </bdi>Best Practices<a class="self-link" href="#best-practices" aria-label="Permalink for Section 2."></a></h2><section id="inleiding-0"><h3 id="x2-1-inleiding"><bdi class="secno">2.1 </bdi>Inleiding<a class="self-link" href="#inleiding-0" aria-label="Permalink for Section 2.1"></a></h3><p>De situatie kan zich voordoen dat een WUS en/of ebMS2 bericht een grootte krijgt die niet meer efficiënt door de WUS / ebMS2 adapters verwerkt kan worden. Ook kan het zich voordoen dat er behoefte bestaat aan het buiten de normale procesgang ('out-of-band') sturen van aanvullende informatie naar systemen. In die gevallen zal dit “grote bericht” op een andere wijze verstuurd moeten worden: middels de DigiKoppeling Koppelvlakstandaard Grote Berichten.</p><p>De volgende standaard aanpak wordt hierbij gehanteerd:</p><ul>
 <li><p>De verzender stelt een bestand samen uit (een deel van) de gegevens die normaliter in het “grote bericht” verzonden zou worden. Het resultaat wordt aangeduid met de term “groot bestand”. Merk op dat dit ook een “groot” xml bestand kan zijn, een CAD bestand, een PDF document, een ZIP bestand, et cetera.</p>
 </li>
 <li><p>De verzender stelt metadata samen over het grote bestand en verstuurt deze metadata in een WUS- of ebMS2-bericht [in een zgn. stuurbericht]. Merk op dat het stuurbericht naast metadata ook voorzien kan zijn van inhoudelijke informatie die al nodig is bij ontvangst van het bericht voorafgaand aan het nog op te halen grote bestand.</p>
@@ -488,15 +491,15 @@ <h2>
 <p>  sample.xml-c3c3281c-e561-4be8-8519-4e9690fb0f08
   c3c3281c-e561-4be8-8519-4e9690fb0f08.xml
   https-my.host.nl-f47ac10b-58cc-<strong>4</strong>372-<strong>a</strong>567-0e02b2c3d479</p>
-</blockquote></section><section id="metadata-als-deel-van-een-bericht"><h4 id="x2-3-3-metadata-als-deel-van-een-bericht"><bdi class="secno">2.3.3 </bdi>Metadata als deel van een bericht<a class="self-link" href="#metadata-als-deel-van-een-bericht" aria-label="Permalink for Section 2.3.3"></a></h4><p>Metadata hoeft niet altijd als een afzonderlijk bericht verzonden te worden. Het is ook toegestaan om metadata met andere parameters te combineren in één bericht. Het verschil tussen gewone services en “grote berichten” services beperkt zich dus alleen tot de wijze waarop de “payload” wordt aangeleverd.</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-comment">&lt;!--?xml version="1.0" encoding="UTF-8"?--&gt;</span>
-<span class="hljs-tag">&lt;<span class="hljs-name">embedded-meta</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb-embedded/"</span> <span class="hljs-attr">xmlns:gb</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xsi:schemalocation</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/ gb-embedded.xsd "</span>&gt;</span>
+</blockquote></section><section id="metadata-als-deel-van-een-bericht"><h4 id="x2-3-3-metadata-als-deel-van-een-bericht"><bdi class="secno">2.3.3 </bdi>Metadata als deel van een bericht<a class="self-link" href="#metadata-als-deel-van-een-bericht" aria-label="Permalink for Section 2.3.3"></a></h4><p>Metadata hoeft niet altijd als een afzonderlijk bericht verzonden te worden. Het is ook toegestaan om metadata met andere parameters te combineren in één bericht. Het verschil tussen gewone services en “grote berichten” services beperkt zich dus alleen tot de wijze waarop de “payload” wordt aangeleverd.</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
+<span class="hljs-tag">&lt;<span class="hljs-name">embedded-meta</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb-embedded/"</span> <span class="hljs-attr">xmlns:gb</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/ gb-embedded.xsd "</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">andere-data</span>&gt;</span>
         Hier kan van alles staan, tekst of andere tags .
     <span class="hljs-tag">&lt;/<span class="hljs-name">andere-data</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">digikoppeling-external-data-references</span> <span class="hljs-attr">profile</span>=<span class="hljs-string">"digikoppeling-gb-1.0"</span>&gt;</span>
-        <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextid</span>=<span class="hljs-string">"1201"</span>&gt;</span>
-            <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span>&gt;</span>
-            <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contenttype</span>=<span class="hljs-string">""</span>&gt;</span>
+        <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextId</span>=<span class="hljs-string">"1201"</span>&gt;</span>
+            <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span> /&gt;</span>
+            <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contentType</span>=<span class="hljs-string">""</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span>
                     NCName
                 <span class="hljs-tag">&lt;/<span class="hljs-name">filename</span>&gt;</span>
@@ -509,16 +512,16 @@ <h2>
             <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">transport</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>
-                    <span class="hljs-tag">&lt;<span class="hljs-name">senderurl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
+                    <span class="hljs-tag">&lt;<span class="hljs-name">senderUrl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
                         https://my.host.nl/12345-2-c3c3281c-e561-4be8-8519
-                    <span class="hljs-tag">&lt;/<span class="hljs-name">senderurl</span>&gt;</span>
+                    <span class="hljs-tag">&lt;/<span class="hljs-name">senderUrl</span>&gt;</span>
                 <span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span>
             <span class="hljs-tag">&lt;/<span class="hljs-name">transport</span>&gt;</span>
-        <span class="hljs-tag">&lt;/<span class="hljs-name">lifetime</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
+        <span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">digikoppeling-external-data-references</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">embedded-meta</span>&gt;</span>
-</code></pre><p>Essentieel voor GB is hierbij de <em>data-reference</em> tag; het gebruik van de <em>digikoppeling-external-data-references</em> tag is hierbij niet noodzakelijk. In plaats daarvan kan ook een tag uit de target namespace gebruikt worden, afhankelijk van het bijbehorende schema:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-comment">&lt;!--?xml version="1.0" encoding="UTF-8"?--&gt;</span>
-<span class="hljs-tag">&lt;<span class="hljs-name">embedded-meta</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb-embedded/"</span> <span class="hljs-attr">xmlns:gb</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xsi:schemalocation</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/ gb-embedded.xsd "</span>&gt;</span>
+</code></pre><p>Essentieel voor GB is hierbij de <em>data-reference</em> tag; het gebruik van de <em>digikoppeling-external-data-references</em> tag is hierbij niet noodzakelijk. In plaats daarvan kan ook een tag uit de target namespace gebruikt worden, afhankelijk van het bijbehorende schema:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
+<span class="hljs-tag">&lt;<span class="hljs-name">embedded-meta</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb-embedded/"</span> <span class="hljs-attr">xmlns:gb</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/ gb-embedded.xsd "</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">data</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>
             tns:id
@@ -527,9 +530,9 @@ <h2>
             tns:version
         <span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">profile</span>=<span class="hljs-string">"digikoppeling-gb-1.0"</span>&gt;</span>
-            <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextid</span>=<span class="hljs-string">"1201"</span>&gt;</span>
-                <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span>&gt;</span>
-                <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contenttype</span>=<span class="hljs-string">""</span>&gt;</span>
+            <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextId</span>=<span class="hljs-string">"1201"</span>&gt;</span>
+                <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span> /&gt;</span>
+                <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contentType</span>=<span class="hljs-string">""</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span>
                         NCName
                     <span class="hljs-tag">&lt;/<span class="hljs-name">filename</span>&gt;</span>
@@ -542,31 +545,31 @@ <h2>
                 <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span>
                 <span class="hljs-tag">&lt;<span class="hljs-name">transport</span>&gt;</span>
                     <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>
-                        <span class="hljs-tag">&lt;<span class="hljs-name">senderurl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
+                        <span class="hljs-tag">&lt;<span class="hljs-name">senderUrl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
                             https://my.host.nl/12345-2-c3c3281c-e561-4be8-8519
-                        <span class="hljs-tag">&lt;/<span class="hljs-name">senderurl</span>&gt;</span>
+                        <span class="hljs-tag">&lt;/<span class="hljs-name">senderUrl</span>&gt;</span>
                     <span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span>
                 <span class="hljs-tag">&lt;/<span class="hljs-name">transport</span>&gt;</span>
-            <span class="hljs-tag">&lt;/<span class="hljs-name">lifetime</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
+            <span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span>
     <span class="hljs-tag">&lt;/<span class="hljs-name">data</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">embedded-meta</span>&gt;</span>
-</code></pre><p>De bijbehorende XSD zou hierbij als volgt gedefinieerd kunnen worden:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-comment">&lt;!--?xml version="1.0" encoding="UTF-8"?--&gt;</span>
-<span class="hljs-tag">&lt;<span class="hljs-name">schema</span> <span class="hljs-attr">xmlns:xs</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span> <span class="hljs-attr">xmlns:gb</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/embedded/"</span> <span class="hljs-attr">elementformdefault</span>=<span class="hljs-string">"qualified"</span> <span class="hljs-attr">attributeformdefault</span>=<span class="hljs-string">"unqualified"</span> <span class="hljs-attr">targetnamespace</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/embedded/"</span>&gt;</span>
-    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">schemalocation</span>=<span class="hljs-string">"gb-1.0.xsd"</span>&gt;</span>
-    <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"embedded-meta"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"tns:data"</span>&gt;</span>
-    <span class="hljs-tag">&lt;<span class="hljs-name">complextype</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"data"</span>&gt;</span>
+</code></pre><p>De bijbehorende XSD zou hierbij als volgt gedefinieerd kunnen worden:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
+<span class="hljs-tag">&lt;<span class="hljs-name">schema</span> <span class="hljs-attr">xmlns:xs</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span> <span class="hljs-attr">xmlns:gb</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/embedded/"</span> <span class="hljs-attr">elementFormDefault</span>=<span class="hljs-string">"qualified"</span> <span class="hljs-attr">attributeFormDefault</span>=<span class="hljs-string">"unqualified"</span> <span class="hljs-attr">targetNamespace</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/embedded/"</span>&gt;</span>
+    <span class="hljs-tag">&lt;<span class="hljs-name">import</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">schemaLocation</span>=<span class="hljs-string">"gb-1.0.xsd"</span> /&gt;</span>
+    <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"embedded-meta"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"tns:data"</span> /&gt;</span>
+    <span class="hljs-tag">&lt;<span class="hljs-name">complexType</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"data"</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">sequence</span>&gt;</span>
-            <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:string"</span>&gt;</span>
-            <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"version"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:string"</span>&gt;</span>
-            <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"result"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"gb:external-data-references"</span>&gt;</span>
-        <span class="hljs-tag">&lt;/<span class="hljs-name">element</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">element</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">element</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">sequence</span>&gt;</span>
-    <span class="hljs-tag">&lt;/<span class="hljs-name">complextype</span>&gt;</span>
-<span class="hljs-tag">&lt;/<span class="hljs-name">element</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">import</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span>
-</code></pre></section><section id="meerdere-bestanden-in-een-bericht"><h4 id="x2-3-4-meerdere-bestanden-in-een-bericht"><bdi class="secno">2.3.4 </bdi>Meerdere bestanden in één bericht<a class="self-link" href="#meerdere-bestanden-in-een-bericht" aria-label="Permalink for Section 2.3.4"></a></h4><p>Niet ieder groot bestand hoeft als een afzonderlijk bericht verzonden te worden. Het is ook toegestaan om meerdere bestanden te combineren in één bericht. Voor ieder afzonderlijk bestand dient dan wel een afzonderlijke data-reference te worden opgenomen in het bericht.</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-tag">&lt;<span class="hljs-name">schema</span> <span class="hljs-attr">xmlns:xs</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span> <span class="hljs-attr">elementformdefault</span>=<span class="hljs-string">"qualified"</span> <span class="hljs-attr">profile</span>=<span class="hljs-string">"digikoppeling-gb-1.0"</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xi:schemalocation</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10/gb-meta.xsd"</span>&gt;</span>
-    <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextid</span>=<span class="hljs-string">"12345-1"</span>&gt;</span>
-        <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span>&gt;</span>
-        <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contenttype</span>=<span class="hljs-string">"application/xml"</span>&gt;</span>
+            <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:string"</span> /&gt;</span>
+            <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"version"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:string"</span> /&gt;</span>
+            <span class="hljs-tag">&lt;<span class="hljs-name">element</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"result"</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"gb:external-data-references"</span> /&gt;</span>
+        <span class="hljs-tag">&lt;/<span class="hljs-name">sequence</span>&gt;</span>
+    <span class="hljs-tag">&lt;/<span class="hljs-name">complexType</span>&gt;</span>
+<span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span>
+</code></pre></section><section id="meerdere-bestanden-in-een-bericht"><h4 id="x2-3-4-meerdere-bestanden-in-een-bericht"><bdi class="secno">2.3.4 </bdi>Meerdere bestanden in één bericht<a class="self-link" href="#meerdere-bestanden-in-een-bericht" aria-label="Permalink for Section 2.3.4"></a></h4><p>Niet ieder groot bestand hoeft als een afzonderlijk bericht verzonden te worden. Het is ook toegestaan om meerdere bestanden te combineren in één bericht. Voor ieder afzonderlijk bestand dient dan wel een afzonderlijke data-reference te worden opgenomen in het bericht.</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-tag">&lt;<span class="hljs-name">schema</span> <span class="hljs-attr">xmlns:xs</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema"</span> <span class="hljs-attr">elementFormDefault</span>=<span class="hljs-string">"qualified"</span> <span class="hljs-attr">profile</span>=<span class="hljs-string">"digikoppeling-gb-1.0"</span> <span class="hljs-attr">xmlns:tns</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10"</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attr">xi:schemaLocation</span>=<span class="hljs-string">"http://www.logius.nl/digikoppeling/gb/2010/10/gb-meta.xsd"</span>&gt;</span>
+    <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextId</span>=<span class="hljs-string">"12345-1"</span>&gt;</span>
+        <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span> /&gt;</span>
+        <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contentType</span>=<span class="hljs-string">"application/xml"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span>
                 Bijlage-1NCName
             <span class="hljs-tag">&lt;/<span class="hljs-name">filename</span>&gt;</span>
@@ -579,15 +582,15 @@ <h2>
         <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">transport</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>
-                <span class="hljs-tag">&lt;<span class="hljs-name">senderurl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
+                <span class="hljs-tag">&lt;<span class="hljs-name">senderUrl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
                     https://my.host.nl/12345-1-c3c3281c-e561-4be8-8519
-                <span class="hljs-tag">&lt;/<span class="hljs-name">senderurl</span>&gt;</span>
+                <span class="hljs-tag">&lt;/<span class="hljs-name">senderUrl</span>&gt;</span>
             <span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">transport</span>&gt;</span>
-    <span class="hljs-tag">&lt;/<span class="hljs-name">lifetime</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
-    <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextid</span>=<span class="hljs-string">"12345-2"</span>&gt;</span>
-        <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span>&gt;</span>
-        <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contenttype</span>=<span class="hljs-string">"application/xml"</span>&gt;</span>
+    <span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
+    <span class="hljs-tag">&lt;<span class="hljs-name">data-reference</span> <span class="hljs-attr">contextId</span>=<span class="hljs-string">"12345-2"</span>&gt;</span>
+        <span class="hljs-tag">&lt;<span class="hljs-name">lifetime</span> /&gt;</span>
+        <span class="hljs-tag">&lt;<span class="hljs-name">content</span> <span class="hljs-attr">contentType</span>=<span class="hljs-string">"application/xml"</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">filename</span>&gt;</span>
                 Bijlage-2
             <span class="hljs-tag">&lt;/<span class="hljs-name">filename</span>&gt;</span>
@@ -600,12 +603,12 @@ <h2>
         <span class="hljs-tag">&lt;/<span class="hljs-name">content</span>&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-name">transport</span>&gt;</span>
             <span class="hljs-tag">&lt;<span class="hljs-name">location</span>&gt;</span>
-                <span class="hljs-tag">&lt;<span class="hljs-name">senderurl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
+                <span class="hljs-tag">&lt;<span class="hljs-name">senderUrl</span> <span class="hljs-attr">type</span>=<span class="hljs-string">"xs:anyURI"</span>&gt;</span>
                     https://my.host.nl/12345-2-c3c3281c-e561-4be8-8519
-                <span class="hljs-tag">&lt;/<span class="hljs-name">senderurl</span>&gt;</span>
+                <span class="hljs-tag">&lt;/<span class="hljs-name">senderUrl</span>&gt;</span>
             <span class="hljs-tag">&lt;/<span class="hljs-name">location</span>&gt;</span>
         <span class="hljs-tag">&lt;/<span class="hljs-name">transport</span>&gt;</span>
-    <span class="hljs-tag">&lt;/<span class="hljs-name">lifetime</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
+    <span class="hljs-tag">&lt;/<span class="hljs-name">data-reference</span>&gt;</span>
 <span class="hljs-tag">&lt;/<span class="hljs-name">schema</span>&gt;</span>
 </code></pre></section><section id="geldigheidsduur"><h4 id="x2-3-5-geldigheidsduur"><bdi class="secno">2.3.5 </bdi>Geldigheidsduur<a class="self-link" href="#geldigheidsduur" aria-label="Permalink for Section 2.3.5"></a></h4><p>Door een beperking op te leggen aan de beschikbaarheid wordt voorkomen dat het niet duidelijk is wanneer een bestand weer verwijderd zou mogen worden. Daarom ligt het voor de hand om altijd een expiratiedatum in de metadata op te nemen.</p><p>Wanneer echter op een andere wijze duidelijk gemaakt wordt wanneer een bestand verwijderd kan worden, bijvoorbeeld door een terugmelding vanuit de applicatie, dan kan de expiratiedatum</p><p>wellicht worden weggelaten.</p><p>Houdt er mee rekening dat een bestandsoverdracht niet binnen een afgesproken tijdsduur of voor expiratie van het bestand voltooid kan worden. Neem voorzorgsmaatregelen door in zo'n geval bijvoorbeeld de overdracht af te breken op basis van een time-out.</p></section><section id="context"><h4 id="x2-3-6-context"><bdi class="secno">2.3.6 </bdi>Context<a class="self-link" href="#context" aria-label="Permalink for Section 2.3.6"></a></h4><p>In het geval van Digikoppeling Grote Berichten is sprake van minimaal twee uitwisselingen waarvan het belang is om de samenhang te bewaken:</p><ol>
 <li><p>bericht met de meta-data;</p>
@@ -627,7 +630,7 @@ <h2>
 </li>
 </ol><ul>
 <li>Contextbewaking met expliciete referentie (WUS)<br>  In het geval van synchrone WUS maar ook bij asynchrone WUS (geen Digikoppeling!) kan als standaard oplossing een referentie meegegeven worden. Dit kan bijvoorbeeld door de applicatie de referentie in de body te laten opnemen. Beter is het echter om dit conform Digikoppeling in de header op te nemen. In het request wordt de referentie dan opgenomen in de MessageID van het WUS-request. De service geeft deze MessageID dan terug als 'contextID' in de (synchrone of asynchrone) WUS-response<sup>1</sup>. Om de oplossing robuuster te maken kan de contextID uit de metadata aanvullend overgenomen worden in het bestand.</li>
-</ul><p><sup>1</sup>: Volgens de WUS koppelvlakstandaard zal ook het headerveld “RelatesTo” van de response overeenkomen met het MessageID van het request.</p></section></section><section id="reliability"><h3 id="x2-4-reliability"><bdi class="secno">2.4 </bdi>Reliability<a class="self-link" href="#reliability" aria-label="Permalink for Section 2.4"></a></h3><section id="retry-strategie"><h4 id="x2-4-1-retry-strategie"><bdi class="secno">2.4.1 </bdi>Retry strategie<a class="self-link" href="#retry-strategie" aria-label="Permalink for Section 2.4.1"></a></h4><p>De bestandsoverdracht is niet “betrouwbaar”; daarom dient de ontvanger een retry mechanisme te implementeren om toch betrouwbaarheid te kunnen afdwingen.</p><p>Op basis van het retry mechanisme zal in voorkomende foutsituaties getracht worden om de bestandsoverdracht te hervatten. Hierbij kan het voorkomen dat de bestandsoverdracht telkens wordt onderbroken, maar ook dat bepaalde service tijdelijk niet beschikbaar is (service window).</p><p>Door het tijdsinterval variabel te maken kan worden voorkomen dat onnodig vaak retries hoeven te worden uitgevoerd, zonder dat hierdoor betrouwbaarheid verloren gaat. Kortere intervallen zijn hierbij zinvol bij onderbrekingen van de bestandsoverdracht, terwijl langere intervallen gebruikt kunnen worden om gaten in de beschikbaarheid te kunnen overbruggen (server uitval, service window, etc.).</p><p>Wanneer er fatale fouten geconstateerd worden of wanneer de geldigheidsduur van een bestand verstreken is, dan zijn verdere retries niet zinvol en dient de bestandsoverdracht te worden afgebroken (give-up).</p><section id="opmerking"><h5 id="x2-4-1-1-opmerking"><bdi class="secno">2.4.1.1 </bdi>Opmerking<a class="self-link" href="#opmerking" aria-label="Permalink for Section 2.4.1.1"></a></h5><p>De noodzaak van een retry-mechanisme doet geen afbreuk aan de standaard. Ook ebMS2 (betrouwbaar protocol) kent beperkingen in het aantal retries en retry-intervallen.</p></section></section><section id="foutafhandeling"><h4 id="x2-4-2-foutafhandeling"><bdi class="secno">2.4.2 </bdi>Foutafhandeling<a class="self-link" href="#foutafhandeling" aria-label="Permalink for Section 2.4.2"></a></h4><p>Indien een bestandsoverdracht niet succesvol voltooid kan worden, dan dienen het meta-bericht, bijbehorende log-bestanden en het eventuele grote bestand bewaard te worden voor een latere handmatige verwerking.</p><p>Het koppelvlak schrijft niet voor hoe te handelen bij optredende foutsituaties; het is de verantwoordelijkheid van de applicaties om hiervoor een adequate oplossing te bieden. Enerzijds zou de ontvanger de bestandsoverdracht kunnen monitoren en eventuele foutsituaties melden aan de verzender; anderzijds kan het ontbreken van een bevestiging voor de verzender aanleiding zijn om actie te ondernemen.</p><p>Belangrijkste foutsituaties bij bestandsoverdracht:</p><table class="dkkvs">
+</ul><p><sup>1</sup>: Volgens de WUS koppelvlakstandaard zal ook het headerveld “RelatesTo” van de response overeenkomen met het MessageID van het request.</p></section></section><section id="reliability"><h3 id="x2-4-reliability"><bdi class="secno">2.4 </bdi>Reliability<a class="self-link" href="#reliability" aria-label="Permalink for Section 2.4"></a></h3><section id="retry-strategie"><h4 id="x2-4-1-retry-strategie"><bdi class="secno">2.4.1 </bdi>Retry strategie<a class="self-link" href="#retry-strategie" aria-label="Permalink for Section 2.4.1"></a></h4><p>De bestandsoverdracht is niet “betrouwbaar”; daarom dient de ontvanger een retry mechanisme te implementeren om toch betrouwbaarheid te kunnen afdwingen.</p><p>Op basis van het retry mechanisme zal in voorkomende foutsituaties getracht worden om de bestandsoverdracht te hervatten. Hierbij kan het voorkomen dat de bestandsoverdracht telkens wordt onderbroken, maar ook dat bepaalde service tijdelijk niet beschikbaar is (service window).</p><p>Door het tijdsinterval variabel te maken kan worden voorkomen dat onnodig vaak retries hoeven te worden uitgevoerd, zonder dat hierdoor betrouwbaarheid verloren gaat. Kortere intervallen zijn hierbij zinvol bij onderbrekingen van de bestandsoverdracht, terwijl langere intervallen gebruikt kunnen worden om gaten in de beschikbaarheid te kunnen overbruggen (server uitval, service window, etc.).</p><p>Wanneer er fatale fouten geconstateerd worden of wanneer de geldigheidsduur van een bestand verstreken is, dan zijn verdere retries niet zinvol en dient de bestandsoverdracht te worden afgebroken (give-up).</p><section id="opmerking"><h5 id="x2-4-1-1-opmerking"><bdi class="secno">2.4.1.1 </bdi>Opmerking<a class="self-link" href="#opmerking" aria-label="Permalink for Section 2.4.1.1"></a></h5><p>De noodzaak van een retry-mechanisme doet geen afbreuk aan de standaard. Ook ebMS2 (betrouwbaar protocol) kent beperkingen in het aantal retries en retry-intervallen.</p></section></section><section id="foutafhandeling"><h4 id="x2-4-2-foutafhandeling"><bdi class="secno">2.4.2 </bdi>Foutafhandeling<a class="self-link" href="#foutafhandeling" aria-label="Permalink for Section 2.4.2"></a></h4><p>Indien een bestandsoverdracht niet succesvol voltooid kan worden, dan dienen het meta-bericht, bijbehorende log-bestanden en het eventuele grote bestand bewaard te worden voor een latere handmatige verwerking.</p><p>Het koppelvlak schrijft niet voor hoe te handelen bij optredende foutsituaties; het is de verantwoordelijkheid van de applicaties om hiervoor een adequate oplossing te bieden. Enerzijds zou de ontvanger de bestandsoverdracht kunnen monitoren en eventuele foutsituaties melden aan de verzender; anderzijds kan het ontbreken van een bevestiging voor de verzender aanleiding zijn om actie te ondernemen.</p><p>Belangrijkste foutsituaties bij bestandsoverdracht:</p><table>
 <thead>
 <tr>
 <th>Statuscode</th>
@@ -672,9 +675,9 @@ <h2>
 </li>
 <li><p>Http basic-authentication (met TLS-offloader)<br> In deze situatie wordt het OIN uit het certificaat door een TLS-offloader toegevoegd in de http-uitwisseling als userid waar de achterliggende bestandsserver op controleert.</p>
 </li>
-</ol></section><section id="certificaat-geldigheid"><h5 id="x2-5-1-3-certificaat-geldigheid"><bdi class="secno">2.5.1.3 </bdi>Certificaat-geldigheid<a class="self-link" href="#certificaat-geldigheid" aria-label="Permalink for Section 2.5.1.3"></a></h5><p>Het document “Gebruik en achtergrond Digikoppeling-certificaten” bevat waardevolle informatie over dit onderwerp.</p><p>Belangrijk is dat niet individuele certificaten van communicatie-partners opgenomen worden in een trust-store. Als dat wel gebeurd zal bij elke certificaat-vernieuwing van deze partner een gelijktijdige aanpassing van de trust-store moeten plaatsvinden. Veel makkelijker is als op basis van een geldige certificaat-hierarchie (root-certificaat van Staat der Nederlanden) controle plaatsvindt. Autorisatie kan vervolgens op basis van een OIN uit dit geldige certificaat ingericht worden.</p></section><section id="tls-offloading"><h5 id="x2-5-1-4-tls-offloading"><bdi class="secno">2.5.1.4 </bdi>TLS-offloading<a class="self-link" href="#tls-offloading" aria-label="Permalink for Section 2.5.1.4"></a></h5><p>Het stelselhandboek (<a href="http://www.stelselhandboek.nl">www.stelselhandboek.nl</a>) bevat informatie over de inrichting van TLS-offloaders en hoe hiermee OIN’s uit een certificaat gehaald kunnen worden.</p><p>Een complicerende factor ten opzichte van berichtenuitwisseling met message-handlers kan zijn dat er sprake kan zijn van meerdere bestandsservers en meerdere clients in de eigen organisatie. Vaak beschikt een organisatie (alleen al vanwege de kosten) niet over meerdere message-handlers; maar meerdere bestandsservers of applicaties die bestanden ophalen is eenvoudiger (en goedkoper) te realiseren. Men kan daarom kiezen om de bestanden rechtstreeks vanuit meerdere (achterliggende) applicaties op te halen en/of aan te bieden (maar hoeft dit niet!). Het stelselhandboek bevat informatie over deze situatie.</p></section></section><section id="server-configuration"><h4 id="x2-5-2-server-configuration"><bdi class="secno">2.5.2 </bdi>Server configuration<a class="self-link" href="#server-configuration" aria-label="Permalink for Section 2.5.2"></a></h4><section id="apache-tomcat"><h5 id="x2-5-2-1-apache-tomcat"><bdi class="secno">2.5.2.1 </bdi>Apache Tomcat<a class="self-link" href="#apache-tomcat" aria-label="Permalink for Section 2.5.2.1"></a></h5><section id="http-connector"><h6 id="x2-5-2-1-1-http-connector"><bdi class="secno">2.5.2.1.1 </bdi>HTTP connector<a class="self-link" href="#http-connector" aria-label="Permalink for Section 2.5.2.1.1"></a></h6><p>Ten behoeve van grote berichten hoeven de http connectors voor DigiKoppeling in principe niet te worden aangepast. Zowel DigiKoppeling als grote berichten maakt gebruikt van client authenticatie en TLS, en ze kunnen derhalve van dezelfde resources gebruik maken (poort 443). Beter is het echter om beide services toch gescheiden te houden en een afzonderlijke logische server in te richten voor grote berichten. Hierdoor kan het berichtenverkeer beter gescheiden worden en kunnen eventuele performance issues beter worden afgehandeld.</p><p>De nieuwe connector dient in <em>server.xml</em> te worden toegevoegd:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-tag">&lt;<span class="hljs-name">connector</span> <span class="hljs-attr">port</span>=<span class="hljs-string">"8443"</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">"org.apache.coyote.http11.Http11Protocol"</span> <span class="hljs-attr">sslenabled</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">maxthreads</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"https"</span> <span class="hljs-attr">secure</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">keystorefile</span>=<span class="hljs-string">"C:/Documents and Settings/gateway/osbgateway-2.0.11/
-        conf/keystores/ebmsserver.jks"</span> <span class="hljs-attr">keystoretype</span>=<span class="hljs-string">"JKS"</span> <span class="hljs-attr">keystorepass</span>=<span class="hljs-string">"xxxx"</span> <span class="hljs-attr">truststorefile</span>=<span class="hljs-string">"C:/Documents and Settings/gateway/osbgateway-2.0.11/
-        conf/keystores/truststore.jks"</span> <span class="hljs-attr">truststoretype</span>=<span class="hljs-string">"JKS"</span> <span class="hljs-attr">truststorepass</span>=<span class="hljs-string">"xxxx"</span> <span class="hljs-attr">clientauth</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">sslprotocol</span>=<span class="hljs-string">"TLS"</span>&gt;</span>
+</ol></section><section id="certificaat-geldigheid"><h5 id="x2-5-1-3-certificaat-geldigheid"><bdi class="secno">2.5.1.3 </bdi>Certificaat-geldigheid<a class="self-link" href="#certificaat-geldigheid" aria-label="Permalink for Section 2.5.1.3"></a></h5><p>Het document “Gebruik en achtergrond Digikoppeling-certificaten” bevat waardevolle informatie over dit onderwerp.</p><p>Belangrijk is dat niet individuele certificaten van communicatie-partners opgenomen worden in een trust-store. Als dat wel gebeurd zal bij elke certificaat-vernieuwing van deze partner een gelijktijdige aanpassing van de trust-store moeten plaatsvinden. Veel makkelijker is als op basis van een geldige certificaat-hierarchie (root-certificaat van Staat der Nederlanden) controle plaatsvindt. Autorisatie kan vervolgens op basis van een OIN uit dit geldige certificaat ingericht worden.</p></section><section id="tls-offloading"><h5 id="x2-5-1-4-tls-offloading"><bdi class="secno">2.5.1.4 </bdi>TLS-offloading<a class="self-link" href="#tls-offloading" aria-label="Permalink for Section 2.5.1.4"></a></h5><p>Het stelselhandboek (<a href="http://www.stelselhandboek.nl">www.stelselhandboek.nl</a>) bevat informatie over de inrichting van TLS-offloaders en hoe hiermee OIN’s uit een certificaat gehaald kunnen worden.</p><p>Een complicerende factor ten opzichte van berichtenuitwisseling met message-handlers kan zijn dat er sprake kan zijn van meerdere bestandsservers en meerdere clients in de eigen organisatie. Vaak beschikt een organisatie (alleen al vanwege de kosten) niet over meerdere message-handlers; maar meerdere bestandsservers of applicaties die bestanden ophalen is eenvoudiger (en goedkoper) te realiseren. Men kan daarom kiezen om de bestanden rechtstreeks vanuit meerdere (achterliggende) applicaties op te halen en/of aan te bieden (maar hoeft dit niet!). Het stelselhandboek bevat informatie over deze situatie.</p></section></section><section id="server-configuration"><h4 id="x2-5-2-server-configuration"><bdi class="secno">2.5.2 </bdi>Server configuration<a class="self-link" href="#server-configuration" aria-label="Permalink for Section 2.5.2"></a></h4><section id="apache-tomcat"><h5 id="x2-5-2-1-apache-tomcat"><bdi class="secno">2.5.2.1 </bdi>Apache Tomcat<a class="self-link" href="#apache-tomcat" aria-label="Permalink for Section 2.5.2.1"></a></h5><section id="http-connector"><h6 id="x2-5-2-1-1-http-connector"><bdi class="secno">2.5.2.1.1 </bdi>HTTP connector<a class="self-link" href="#http-connector" aria-label="Permalink for Section 2.5.2.1.1"></a></h6><p>Ten behoeve van grote berichten hoeven de http connectors voor DigiKoppeling in principe niet te worden aangepast. Zowel DigiKoppeling als grote berichten maakt gebruikt van client authenticatie en TLS, en ze kunnen derhalve van dezelfde resources gebruik maken (poort 443). Beter is het echter om beide services toch gescheiden te houden en een afzonderlijke logische server in te richten voor grote berichten. Hierdoor kan het berichtenverkeer beter gescheiden worden en kunnen eventuele performance issues beter worden afgehandeld.</p><p>De nieuwe connector dient in <em>server.xml</em> te worden toegevoegd:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-tag">&lt;<span class="hljs-name">Connector</span> <span class="hljs-attr">port</span>=<span class="hljs-string">"8443"</span> <span class="hljs-attr">protocol</span>=<span class="hljs-string">"org.apache.coyote.http11.Http11Protocol"</span> <span class="hljs-attr">SSLEnabled</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">maxThreads</span>=<span class="hljs-string">"10"</span> <span class="hljs-attr">scheme</span>=<span class="hljs-string">"https"</span> <span class="hljs-attr">secure</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">keystoreFile</span>=<span class="hljs-string">"C:/Documents and Settings/gateway/osbgateway-2.0.11/
+        conf/keystores/ebmsserver.jks"</span> <span class="hljs-attr">keystoreType</span>=<span class="hljs-string">"JKS"</span> <span class="hljs-attr">keystorePass</span>=<span class="hljs-string">"xxxx"</span> <span class="hljs-attr">truststoreFile</span>=<span class="hljs-string">"C:/Documents and Settings/gateway/osbgateway-2.0.11/
+        conf/keystores/truststore.jks"</span> <span class="hljs-attr">truststoreType</span>=<span class="hljs-string">"JKS"</span> <span class="hljs-attr">truststorePass</span>=<span class="hljs-string">"xxxx"</span> <span class="hljs-attr">clientAuth</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">sslProtocol</span>=<span class="hljs-string">"TLS"</span> /&gt;</span>
 </code></pre><p>Merk op dat in dit voorbeeld een poortnummer toegepast wordt dat naar buiten toe (Digikoppeling) niet toegepast mag worden. Dit kan dus wel als interne implementatie maar zal nog via NATting naar poort 443 getransformeerd moeten worden.</p></section><section id="security-filter"><h6 id="x2-5-2-1-2-security-filter"><bdi class="secno">2.5.2.1.2 </bdi>Security Filter<a class="self-link" href="#security-filter" aria-label="Permalink for Section 2.5.2.1.2"></a></h6><p>Ten behoeve van de autorisatie kan ook gebruik gemaakt worden van security filters om de geldigheid van een request aan de hand van het client certificaat te kunnen verifiëren. Hierbij kan gedacht worden aan een controle dat iedere url het OIN van de client dient te bevatten, maar ook aan een database waarin iedere afzonderlijke url geautoriseerd dient te worden.</p><p>Security filters dienen als library (jar) geïmplementeerd te worden en dienen in <em>web.xml</em> geconfigureerd te worden:</p><pre><code class="XML hljs xml" aria-busy="false"><span class="hljs-tag">&lt;<span class="hljs-name">filter</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">filter-name</span>&gt;</span>shared<span class="hljs-tag">&lt;/<span class="hljs-name">filter-name</span>&gt;</span>
     <span class="hljs-tag">&lt;<span class="hljs-name">filter-class</span>&gt;</span>com.filters.Authenticate<span class="hljs-tag">&lt;/<span class="hljs-name">filter-class</span>&gt;</span>
@@ -820,6 +823,7 @@ <h2 id="x5-lijst-met-figuren"><bdi class="secno">5. </bdi>Lijst met figuren<a cl
 
 
 
+
 <p role="navigation" id="back-to-top">
     <a href="#title"><abbr title="Back to Top">↑</abbr></a>
   </p><script id="respec-dfn-panel">(() => {

```

</details>
